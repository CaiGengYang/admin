CREATE TABLE user_table (
	user_id serial PRIMARY KEY,
	user_name varchar(20) UNIQUE NOT NULL,
	pass varchar(30) NOT NULL,
	real_name varchar(60),
	birth_date date,
	location varchar(60),
	time_zone varchar(4),
	bio text,
	email_address varchar(60) NOT NULL,
	on_probation bool NOT NULL,
	is_banned bool NOT NULL
);

CREATE TABLE forum_role_table (
	role_id serial PRIMARY KEY,
	role_name varchar(25) UNIQUE NOT NULL
);

CREATE TABLE user_to_forum_role_table (
	user_id integer references user_table(user_id) NOT NULL,
	forum_role_id integer references forum_role_table(role_id) NOT NULL
);

CREATE TABLE forum_topic_table (
	topic_id serial PRIMARY KEY,
	topic_name - varchar(40) NOT NULL,
	parent_topic_id references forum_topic_table(topic_id),
	is_public bool NOT NULL,
	is_active bool NOT NULL
);

CREATE TABLE forum_topic_to_moderator_table (
	user_id integer references user_table.user_id) NOT NULL,
	topic_id integer references forum_topic_table(topic_id) NOT NULL
);

CREATE TABLE forum_topic_permissions_table (
	topic_id integer references forum_topic_table(topic_id) NOT NULL,
	user_id integer references user_table(user_id) NOT NULL
);

CREATE TABLE forum_post_table (
	post_id serial PRIMARY KEY,
	parent_post_id integer references forum_post_table(post_id),
	author_id integer references user_table(user_id) NOT NULL,
	topic_id integer references forum_topic_table(topic_id) NOT NULL,
	post_subject varchar(80) NOT NULL,
	post_content text NOT NULL,
	date_posted timestamp NOT NULL,
	is_sticky bool NOT NULL,
	is_flagged bool NOT NULL,
	is_closed bool NOT NULL,
	is_hidden bool NOT NULL
);

CREATE TABLE forum_action_table (
	action_id serial PRIMARY KEY,
	action_name varchar(40) UNIQUE NOT NULL
);

CREATE TABLE forum_log_table (
	log_id serial PRIMARY KEY,
	action_id integer references forum_action_table(action_id) NOT NULL,
	action_date timestamp NOT NULL,
	user_id integer references user_table(user_id) NOT NULL,
	user_acted_on integer references user_table(user_id),
	post_acted_on integer references forum_post_table(post_id)
);

CREATE TABLE forum_settings_table (
	no_of_proby_posts integer NOT NULL,
	use_moderators bool NOT NULL,
	require_birth_date bool NOT NULL,
	auto_logout bool NOT NULL,
	session_timeout - int NOT NULL (in minutes)
);






















-------------------------------- End of file --------------------------------

